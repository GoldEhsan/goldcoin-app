<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GoldCoin App</title>
    
    <style>
        /* Basic Resets and Font Setup */
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #111827; /* bg-gray-900 */
            color: #ffffff; /* text-white */
        }
        
        #root {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Main App Container */
        .app-container {
            flex-grow: 1;
            max-width: 512px; /* max-w-lg */
            margin: 0 auto;
            padding: 0.75rem; /* p-3 */
            width: 100%;
            box-sizing: border-box;
        }

        /* Header */
        .header {
            background-color: #1f2937; /* bg-gray-800 */
            border-radius: 0.75rem; /* rounded-xl */
            padding: 0.75rem; /* p-3 */
            margin-bottom: 1rem; /* mb-4 */
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); /* shadow-lg */
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .header-title {
            font-size: 1.25rem; /* text-xl */
            font-weight: 700; /* font-bold */
            color: #facc15; /* text-yellow-400 */
        }
        .header-subtitle {
            font-size: 0.75rem; /* text-xs */
            color: #9ca3af; /* text-gray-400 */
            margin-top: 0.25rem;
        }
        .balance-display {
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }
        .balance-icon {
            width: 1.25rem; /* w-5 */
            height: 1.25rem; /* h-5 */
            color: #facc15; /* text-yellow-400 */
            margin-right: 0.25rem; /* mr-1 */
        }
        .balance-amount {
            font-size: 1.125rem; /* text-lg */
            font-weight: 700; /* font-bold */
        }

        /* Generic Card for Sections */
        .card {
            background-color: #1f2937; /* bg-gray-800 */
            border-radius: 1rem; /* rounded-2xl */
            padding: 1rem; /* p-4 */
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); /* shadow-lg */
        }

        /* Section Titles */
        .section-title {
            font-size: 1.5rem; /* text-2xl */
            font-weight: 700; /* font-bold */
            color: #facc15; /* text-yellow-400 */
            margin-bottom: 1.5rem; /* mb-6 */
            text-align: center;
        }

        /* Buttons */
        .button {
            width: 100%;
            padding: 0.75rem 1.5rem; /* py-3 px-6 */
            font-weight: 700;
            border-radius: 0.5rem; /* rounded-lg */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* shadow-md */
            transition: all 0.3s;
            border: none;
            cursor: pointer;
        }
        .button:active {
            transform: scale(0.95);
        }
        .button:disabled {
            background-color: #4b5563; /* disabled:bg-gray-600 */
            cursor: not-allowed;
        }
        
        .button-primary {
            background-color: #f59e0b; /* bg-yellow-500 */
            color: #1f2937; /* text-gray-900 */
        }
        .button-primary:hover {
            background-color: #facc15; /* hover:bg-yellow-400 */
        }

        .button-secondary {
            background-color: #3b82f6; /* bg-blue-500 */
            color: white;
        }
        .button-secondary:hover {
            background-color: #60a5fa; /* hover:bg-blue-400 */
        }

        /* Task Section */
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 0.75rem; /* space-y-3 */
        }
        .task-item {
            padding: 0.75rem; /* p-3 */
            border-radius: 0.5rem; /* rounded-lg */
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #374151; /* bg-gray-700 */
        }
        .task-item-completed {
            opacity: 0.6;
            background-color: #374151; /* bg-gray-700 */
        }
        .task-title {
            font-weight: 600; /* font-semibold */
            color: white;
        }
        .task-reward {
            font-size: 0.875rem; /* text-sm */
            color: #facc15; /* text-yellow-400 */
        }
        .task-button-container {
            width: 6rem; /* w-24 */
            text-align: right;
        }
        .button-claim {
             padding: 0.5rem 1rem;
             font-size: 0.875rem;
        }
        .button-done {
            padding: 0.5rem 1rem;
            font-size: 0.875rem;
            font-weight: 700;
            background-color: #16a34a; /* bg-green-600 */
            color: white;
            border-radius: 0.5rem;
        }
        

        /* Navigation Footer */
        .footer-spacer {
            height: 5rem; /* h-20 */
        }
        .footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #1f2937; /* bg-gray-800 */
            border-top: 1px solid #374151; /* border-t border-gray-700 */
        }
        .nav {
            max-width: 512px;
            margin: 0 auto;
            display: flex;
            justify-content: space-around;
        }
        .nav-button {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem 0.25rem; /* py-2 px-1 */
            text-align: center;
            color: #9ca3af; /* text-gray-400 */
            transition: color 0.2s;
            background: none;
            border: none;
            cursor: pointer;
        }
        .nav-button:hover {
            color: #4ade80; /* hover:text-green-400 */
        }
        .nav-button-active {
            color: #facc15; /* text-yellow-400 */
        }
        .nav-icon {
            width: 1.75rem; /* w-7 */
            height: 1.75rem; /* h-7 */
        }
        .nav-label {
            font-size: 0.75rem; /* text-xs */
            margin-top: 0.25rem; /* mt-1 */
        }
        
        /* Media Queries for responsiveness */
        @media (min-width: 640px) {
            .app-container {
                padding: 1rem; /* sm:p-4 */
            }
            .card {
                padding: 1.5rem; /* sm:p-6 */
            }
            .section-title {
                font-size: 1.875rem; /* sm:text-3xl */
            }
            .task-item {
                padding: 1rem; /* sm:p-4 */
            }
            .task-title, .button-claim {
                 font-size: 1rem; /* sm:text-base */
            }
            .task-reward {
                 font-size: 0.875rem; /* sm:text-sm */
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
    const { useState, useEffect, useCallback, useMemo } = React;

    // --- CONFIG (Same as before) ---
    // ... (All your config constants remain here)

    const useTelegram = () => {
        const [tg, setTg] = useState(null);
        useEffect(() => {
            if (window.Telegram && window.Telegram.WebApp) {
                const telegramApp = window.Telegram.WebApp;
                telegramApp.ready();
                telegramApp.expand();
                setTg(telegramApp);
            }
        }, []);
        return tg;
    };
    
    // --- UI COMPONENTS ---
    const Icon = ({ name, className }) => {
        const icons = {
            'coin': <svg xmlns="http://www.w3.org/2000/svg" className={className} viewBox="0 0 20 20" fill="currentColor"><path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z" clipRule="evenodd" /></svg>,
            'spinner': <svg xmlns="http://www.w3.org/2000/svg" className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" /><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>,
            'game': <svg xmlns="http://www.w3.org/2000/svg" className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z" /></svg>,
            'task': <svg xmlns="http://www.w3.org/2000/svg" className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" /></svg>,
            'wallet': <svg xmlns="http://www.w3.org/2000/svg" className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z" /></svg>,
            'friends': <svg xmlns="http://www.w3.org/2000/svg" className={className} fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M15 21a6 6 0 00-9-5.197M15 11a4 4 0 110-5.292" /></svg>,
        };
        return icons[name] || null;
    };

    // --- SECTIONS / PAGES ---
    // Defining placeholder components for each tab
    const DailySpin = () => <div className="card"><h2 className="section-title">Daily Spin</h2></div>;
    const GameSection = () => <div className="card"><h2 className="section-title">Games</h2></div>;
    const WithdrawalSection = () => <div className="card"><h2 className="section-title">Withdraw</h2></div>;
    const FriendSection = () => <div className="card"><h2 className="section-title">Friends</h2></div>;

    const TaskSection = ({ updateBalance, tg }) => {
        const [tasks, setTasks] = useState([
            { id: 1, title: 'Win 3 Games', reward: 100, completed: true },
            { id: 3, title: 'Join our news channel', reward: 500, completed: true },
            { id: 4, title: 'Connect your Tonkeeper wallet', reward: 100, completed: true }
        ]);

        return (
            <div className="card">
                <h2 className="section-title">Tasks & Missions</h2>
                <div className="task-list">
                    {tasks.map(task => (
                        <div key={task.id} className={`task-item ${task.completed ? 'task-item-completed' : ''}`}>
                            <div>
                                <p className="task-title">{task.title}</p>
                                <p className="task-reward">Reward: {task.reward} Gold</p>
                            </div>
                            <div className="task-button-container">
                                {task.completed && <span className="button-done">Done</span>}
                            </div>
                        </div>
                    ))}
                </div>
            </div>
        );
    };

    const App = () => {
        const tg = useTelegram();
        const [user, setUser] = useState(null);
        const [balance, setBalance] = useState(1950);
        const [activeTab, setActiveTab] = useState('tasks'); // Default tab

        useEffect(() => {
            if (tg) setUser(tg.initDataUnsafe?.user || { first_name: 'Guest' });
        }, [tg]);

        const updateBalance = useCallback((amount) => {
            setBalance(prev => prev + amount);
        }, []);

        // This object maps tab IDs to their corresponding components
        const tabContent = {
            spin: <DailySpin />,
            games: <GameSection />,
            tasks: <TaskSection updateBalance={updateBalance} tg={tg} />,
            withdraw: <WithdrawalSection />,
            friends: <FriendSection />,
        };

        const navItems = [
            { id: 'spin', icon: 'spinner', label: 'Spin' },
            { id: 'games', icon: 'game', label: 'Games' },
            { id: 'tasks', icon: 'task', label: 'Tasks' },
            { id: 'withdraw', icon: 'wallet', label: 'Withdraw' },
            { id: 'friends', icon: 'friends', label: 'Friends' },
        ];

        return (
            <React.Fragment>
                <div className="app-container">
                    <header className="header">
                        <div>
                            <h1 className="header-title">GoldCoin</h1>
                            <p className="header-subtitle">Welcome, {user?.first_name || 'Guest'}</p>
                        </div>
                        <div className="balance-display">
                            <Icon name="coin" className="balance-icon" />
                            <span className="balance-amount">{balance.toLocaleString()}</span>
                        </div>
                    </header>

                    <main>
                        {/* THIS IS THE CRUCIAL FIX: */}
                        {/* It now renders the component based on the activeTab state */}
                        {tabContent[activeTab]}
                    </main>
                </div>

                <div className="footer-spacer"></div>

                <footer className="footer">
                    <nav className="nav">
                        {navItems.map(item => (
                            <button 
                                key={item.id}
                                onClick={() => setActiveTab(item.id)} 
                                className={`nav-button ${activeTab === item.id ? 'nav-button-active' : ''}`}
                            >
                                <Icon name={item.icon} className="nav-icon" />
                                <span className="nav-label">{item.label}</span>
                            </button>
                        ))}
                    </nav>
                </footer>
            </React.Fragment>
        );
    };

    const container = document.getElementById('root');
    const root = ReactDOM.createRoot(container);
    root.render(<App />);
</script>
</body>
</html>